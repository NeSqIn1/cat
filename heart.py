import os
import logging
import random
import asyncio
from telegram import Update
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    filters,
)

TOKEN = os.environ.get("TELEGRAM_BOT_TOKEN")
TARGET_USER_ID = int(os.environ.get("TARGET_USER_ID", "0"))
OWNER_ID = int(os.environ.get("OWNER_ID", "0"))

if not TOKEN or not TARGET_USER_ID or not OWNER_ID:
    raise ValueError("–ù—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å TELEGRAM_BOT_TOKEN, TARGET_USER_ID –∏ OWNER_ID –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è")

logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

logger = logging.getLogger(__name__)

messages = [
    "–¢—ã —Å–æ–≥—Ä—Ä–µ–≤–∞–µ—à—å –º–æ—ë —Å–µ—Ä–¥—Ü–µ, –∫–æ—Ç–∏–∫!",
    "–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —è –≤–∏–∂—É —Ç–µ–±—è, —è —Ç–∞—é, –∫–æ—Ç–∏–∫!",
    "–¢–≤–æ—ë –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ ‚Äî –º–æ–π —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π –ø–æ–¥–∞—Ä–æ–∫, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π –º–∏—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Ä—á–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –ª—É—á–∏–∫ —Å–æ–ª–Ω—Ü–∞ –≤ –º–æ—ë–º –¥–Ω–µ, –∫–æ—Ç–∏–∫!",
    "–Ø –Ω–µ —É—Å—Ç–∞—é –ª—é–±–æ–≤–∞—Ç—å—Å—è —Ç–æ–±–æ–π, –∫–æ—Ç–µ–Ω–æ–∫!",
    "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ—è —Å–ª–∞–±–æ—Å—Ç—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è —á–∞—â–µ —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ—é –∂–∏–∑–Ω—å –≤–æ–ª—à–µ–±–Ω–æ–π, –∫–æ—Ç–∏–∫!",
    "–Ø –ª—é–±–ª—é –∫–∞–∂–¥–æ–µ –º–≥–Ω–æ–≤–µ–Ω–∏–µ —Å —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π —è –∑–∞–±—ã–≤–∞—é –æ–±–æ –≤—Å—ë–º –Ω–∞ —Å–≤–µ—Ç–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã –∫—Ä–∞—Å–∏–≤–∞, –∫–æ—Ç–µ–Ω–æ—á–µ–∫, –∫–∞–∫ —Ä–∞—Å—Å–≤–µ—Ç!",
    "–ö–∞–∂–¥–æ–µ —Ç–≤–æ—ë —Å–ª–æ–≤–æ ‚Äî –º—É–∑—ã–∫–∞ –¥–ª—è –º–æ–µ–π –¥—É—à–∏, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–æ–º–∞, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ–π —Å–∞–º—ã–π –∑–∞–≤–µ—Ç–Ω—ã–π —Å–æ–Ω, –∫–æ—Ç–∏–∫!",
    "–ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å —Ç–æ–±–æ–π ‚Äî –ø—Ä–∞–∑–¥–Ω–∏–∫, –∫–æ—Ç–∏–∫!",
    "–Ø –¥–æ—Ä–æ–∂—É –∫–∞–∂–¥–æ–π —Å–µ–∫—É–Ω–¥–æ–π —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –≥–ª–∞–≤–Ω–∞—è –º—ã—Å–ª—å —É—Ç—Ä–æ–º –∏ –≤–µ—á–µ—Ä–æ–º, –∫–æ—Ç–∏–∫!",
    "–í —Ç–≤–æ–∏—Ö –æ–±—ä—è—Ç–∏—è—Ö —è –Ω–∞—Ö–æ–∂—É –ø–æ–∫–æ–π!!!!!",
    "–¢—ã ‚Äî –º–æ—ë –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ, –∫–æ—Ç–∏–∫!",
    "–ú–æ–∏ —á—É–≤—Å—Ç–≤–∞ –∫ —Ç–µ–±–µ –±–µ–∑–≥—Ä–∞–Ω–∏—á–Ω—ã, –∫–æ—Ç–∏–∫!",
    "–Ø —Å—á–∞—Å—Ç–ª–∏–≤, —á—Ç–æ —Ç—ã —É –º–µ–Ω—è –µ—Å—Ç—å, –∫–æ—Ç–∏–∫!",
    "–° –∫–∞–∂–¥—ã–º –¥–Ω—ë–º –ª—é–±–ª—é —Ç–µ–±—è —Å–∏–ª—å–Ω–µ–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã –Ω–∞–ø–æ–ª–Ω—è–µ—à—å –º–æ—é –∂–∏–∑–Ω—å —Å–º—ã—Å–ª–æ–º, –∫–æ—Ç–∏–∫!",
    "–Ø —Ö–æ—á—É –¥–µ–ª–∞—Ç—å —Ç–µ–±—è —Å—á–∞—Å—Ç–ª–∏–≤–æ–π, –∫–æ—Ç–∏–∫!!!!!",
    "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å, –∫–æ—Ç–∏–∫!!!!!!!!!",
    "–í —Ç–≤–æ–∏—Ö –≥–ª–∞–∑–∞—Ö —è –≤–∏–∂—É —Å–≤–æ—ë –±—É–¥—É—â–µ–µ, –∫–æ—Ç–∏–∫!",
    "–õ—é–±–ª—é —Ç–≤–æ–π —Å–º–µ—Ö, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Ä–∞–¥–æ—Å—Ç—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è —á–∞—Å—Ç—å –º–æ–µ–≥–æ –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π —è –ª–µ—Ç–∞—é –æ—Ç —Å—á–∞—Å—Ç—å—è, –∫–æ—Ç–∏–∫!",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ, –∫–æ—Ç–∏–∫!",
    "–Ø —Å–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Å–∫–∞–∑–∫–∞, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å—á–∞—Å—Ç—å–µ ‚Äî —ç—Ç–æ —Ç—ã, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–∞—è –º–µ–ª–æ–¥–∏—è, –∫–æ—Ç–∏–∫!",
    "–Ø —Ö—Ä–∞–Ω—é —Ç–µ–ø–ª–æ —Ç–≤–æ–∏—Ö –ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî —Å–≤–µ—Ç –≤ –º–æ—ë–º —Å–µ—Ä–¥—Ü–µ, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—ë—Ç –¥–ª—è —Ç–µ–±—è, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—ë –≤—Å—ë, –∫–æ—Ç–∏–∫!",
    "–Ø –ª—é–±–ª—é —Ç–≤–æ–π –≥–æ–ª–æ—Å, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π —è –∑–∞–±—ã–≤–∞—é –æ–±–æ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö, –∫–æ—Ç–∏–∫!",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –æ—Å–æ–±–µ–Ω–Ω—ã–º, –∫–æ—Ç–∏–∫!",
    "–Ø —Ö–æ—á—É –±—ã—Ç—å —Ä—è–¥–æ–º –≤–µ—á–Ω–æ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–∞—è –≥—Ä—ë–∑–∞, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –±—å—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –≥–∞—Ä–º–æ–Ω–∏—è, –∫–æ—Ç–∏–∫!",
    "–Ø –Ω–∞–ø–æ–ª–Ω—è—é—Å—å —Å—á–∞—Å—Ç—å–µ–º —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è –º–µ—á—Ç–∞—Ç—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ —Ç–∞–µ—Ç –æ—Ç —Ç–≤–æ–∏—Ö –ø–æ—Ü–µ–ª—É–µ–≤, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –∑–≤–µ–∑–¥–∞, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π –ª—é–±–æ–µ –º–µ—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ–º–æ–º, –∫–æ—Ç–∏–∫!",
    "–Ø —Ö–æ—á—É —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ç–≤–æ–∏ –≥–ª–∞–∑–∞ –≤–µ—á–Ω–æ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—ë —Å–æ–ª–Ω—Ü–µ –≤ –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å, –∫–æ—Ç–∏–∫!",
    "–Ø –ª—é–±–ª—é, –∫–æ–≥–¥–∞ —Ç—ã —Å–º–µ—ë—à—å—Å—è, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –º—ã—Å–ª—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—ë—Ç, –∫–æ–≥–¥–∞ —Ç—ã —Ä—è–¥–æ–º, –∫–æ—Ç–∏–∫!",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ—é –∂–∏–∑–Ω—å –ø–æ–ª–Ω–æ–π, –∫–æ—Ç–∏–∫!",
    "–Ø –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ –æ—Ç —Ç–≤–æ–µ–π –¥–æ–±—Ä–æ—Ç—ã, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Ä–∞–¥–æ—Å—Ç—å –∏ –ø–æ–∫–æ–π, –∫–æ—Ç–∏–∫!",
    "–Ø —Ö–æ—á—É –¥–∞—Ä–∏—Ç—å —Ç–µ–±–µ —Å—á–∞—Å—Ç—å–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ—ë —Å–µ—Ä–¥—Ü–µ –º—è–≥–∫–∏–º, –∫–æ—Ç–∏–∫!",
    "–ú–æ—è –ª—é–±–æ–≤—å –∫ —Ç–µ–±–µ ‚Äî –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ–π —Å–∞–º—ã–π –¥–æ—Ä–æ–≥–æ–π —á–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–∏–∫!",
    "–° —Ç–æ–±–æ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –æ—Å–æ–±–µ–Ω–Ω—ã–º, –∫–æ—Ç–∏–∫! (–Ω—É –ø—Ä—è–º –æ—á–µ–Ω—å—å—å—å)",
    "–Ø –ª—é–±–ª—é —Ç–≤–æ–∏ –≥–ª–∞–∑–∫–∏, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–∞—è –≤–µ—Å–Ω–∞, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Ä–∞–¥—É–∂–Ω–∞—è –º–µ—á—Ç–∞, –∫–æ—Ç–∏–∫!",
    "–Ø —Å—á–∞—Å—Ç–ª–∏–≤, –∫–æ–≥–¥–∞ —Ç—ã —Å—á–∞—Å—Ç–ª–∏–≤–∞, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ–π –∞–Ω–≥–µ–ª, –∫–æ—Ç–∏–∫!",
    "–ú–æ—è –¥—É—à–∞ —Å–≤–µ—Ç–∏—Ç—Å—è –æ—Ç —Ç–≤–æ–µ–π –ª—é–±–≤–∏, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —ç–Ω–µ—Ä–≥–∏—è, –∫–æ—Ç–∏–∫!",
    "–Ø –≤–ª—é–±–ª—ë–Ω –≤ –∫–∞–∂–¥—É—é —á–µ—Ä—Ç–æ—á–∫—É —Ç–≤–æ–µ–≥–æ –ª–∏—Ü–∞, –∫–æ—Ç–∏–∫!(–Ω—É –ø—Ä–∞–≤–¥–∞)",
    "–¢—ã ‚Äî –º–æ—ë –±–µ–∑–º—è—Ç–µ–∂–Ω–æ–µ —Å—á–∞—Å—Ç—å–µ, –∫–æ—Ç–∏–∫!",
    "–Ø –ª—é–±–ª—é —Ç–µ–±—è –¥–æ –ª—É–Ω—ã –∏ –æ–±—Ä–∞—Ç–Ω–æ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Ç–∏—Ö–∞—è –≥–∞–≤–∞–Ω—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–±–µ, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Å–∫–∞–∑–∫–∞, –∫–æ—Ç–∏–∫!",
    "–Ø –¥—ã—à—É —Ç–æ–±–æ–π, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Ä–∞–¥—É–≥–∞ –ø–æ—Å–ª–µ –¥–æ–∂–¥—è, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ —Ä–∞–¥—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ç—ã —Ä—è–¥–æ–º, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –≤–µ—á–Ω–∞—è –ø–µ—Å–Ω—è, –∫–æ—Ç–∏–∫!",
    "–Ø –ª—é–±–ª—é —Ç–≤–æ–∏ —Ç–µ–ø–ª—ã–µ –ª–∞–¥–æ–Ω–∏, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è —Å–∞–º–∞—è –Ω–µ–∂–Ω–∞—è –º—ã—Å–ª—å, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å—á–∞—Å—Ç—å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç–µ–±—è, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—è –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å, –∫–æ—Ç–∏–∫!",
    "–Ø –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ –æ—Ç —Ç–≤–æ–µ–π —É–ª—ã–±–∫–∏, –∫–æ—Ç–∏–∫!",
    "–¢—ã ‚Äî –º–æ—ë –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ –∏ –ø–æ–∫–æ–π, –∫–æ—Ç–∏–∫!",
    "–ú–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ–µ—Ç –æ—Ç —Ç–≤–æ–µ–π –ª—é–±–≤–∏, –∫–æ—Ç–∏–∫!",
    "–¢—ã —Å–∞–º—ã–π —à–∏–∫–∞—Ä–Ω—ã–π –∫–æ—Ç–∏–∫ –≤ –≥–∞–ª–∞–∫—Ç–∏–∫–µ!",
    "–º—Ä—Ä~"
]


# ‚è± –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ–æ–Ω–æ–≤—ã–π —Ü–∏–∫–ª
async def love_loop(application):
    await application.wait_until_ready()  # –∂–¥—ë—Ç –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
    while True:
        try:
            msg = random.choice(messages)
            await application.bot.send_message(chat_id=TARGET_USER_ID, text=msg)
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø—Ä–∏–∑–Ω–∞–Ω–∏—è: {e}")
        await asyncio.sleep(1)  # 0.5 —á–∞—Å


# üé¨ –ö–æ–º–∞–Ω–¥–∞ /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–π–æ–æ–æ, –∫–∞–∂–¥—ã–µ –ø–æ–ª—á–∞—Å–∞ —Ç—ã –±—É–¥–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –º–æ—é –ª—é–±–æ–≤—å")


# üîÅ –ü–µ—Ä–µ—Å—ã–ª–∫–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤–ª–∞–¥–µ–ª—å—Ü—É
async def forward_to_owner(update: Update, context: ContextTypes.DEFAULT_TYPE):
    try:
        await context.bot.forward_message(
            chat_id=OWNER_ID,
            from_chat_id=update.message.chat_id,
            message_id=update.message.message_id
        )
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–µ—Ä–µ—Å—ã–ª–∫–∏: {e}")


# üöÄ –ó–∞–ø—É—Å–∫
if __name__ == '__main__':
    app = ApplicationBuilder().token(TOKEN).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, forward_to_owner))

    # –°—Ç–∞—Ä—Ç—É–µ–º —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
    asyncio.get_event_loop().create_task(love_loop(app))
    app.run_polling()
